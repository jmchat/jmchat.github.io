
<!DOCTYPE html>
<html>
    <head>
    	<title>Route naar uw plek op Strandpark de Zeeuwse Kust</title>
    	<meta charset="utf-8" />
    	<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
		<link rel="stylesheet" href="./css/styles.css">

        <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
		<script src="https://igor-vladyka.github.io/leaflet.motion/dist/leaflet.motion.min.js"></script>
        <!-- <style>
            html, body, #map {width: 100%; height: 100%; margin: 0px; padding: 25px 0 40px 0;}
			.leaflet-div-icon {
				background: transparent!important;
				border: none!important;
				color: white;
			}
        </style> -->
     </head>

    <body>

<!-- Navbar (sit on top) -->
<div class="header">
  <div>
    <h2><b>Strandpark</b> de <b>Zeeuwse Kust</b></h2>
  </div>
</div>

<!-- Map weergave -->
		<div id="map" class="map"></div>

<!-- Alle scripts -->
    	<script>
			var map = L.map("map"),

			currentLocationMarker,
         	myCurrentRoutePath;

			L.tileLayer('https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png',{
			/*https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {*/
				// attribution: 'Route beschrijving voor Strandpark De Zeeuwse Kust'
			}).addTo(map);

            L.imageOverlay('plattegrond.png',
            [[51.739979,3.798248], [51.734991,3.809223]]).addTo(map);

		//Hier kunnen dus meerdere routes onder elkaar staan
			var carRoute = [];

			carRoute[1] = JSON.parse('[{"lat":51.878726,"lng":5.850683},{"lat":51.878747,"lng":5.851015},{"lat":51.878725,"lng":5.851522},{"lat":51.878695,"lng":5.851781},{"lat":51.878449,"lng":5.851645},{"lat":51.878246,"lng":5.851542}]');

			carRoute[2] = JSON.parse('[{"lat":51.8798573,"lng":5.8503105},{"lat":51.878747,"lng":5.851015},{"lat":51.878725,"lng":5.851522},{"lat":51.878695,"lng":5.851781},{"lat":51.878449,"lng":5.851645},{"lat":51.878246,"lng":5.851542}]');
			
			var urlParams = new URLSearchParams(window.location.search);
			var locations = carRoute[urlParams.get('location')];
			var number = urlParams.get('location');

if ((urlParams.has('location') == true) && (number < 3)) {

			var route = L.motion.polyline(locations, {
						color: "#994000",
						weight: 10,
					}, {
						auto: false,
						duration: 2000
					}, {
						removeOnEnd: false,
						icon: L.divIcon({html: "<i class='fa fa-car fa-3x' aria-hidden='true'></i>", iconSize: L.point(27.5, 24)})
					}).addTo(map);

				setTimeout(function () {
				route.motionStart();
			}, 2000);

		}

		function onLocationFound(e) {
		var radius = e.accuracy / 2;

		// L.marker(e.latlng).addTo(map)

         if (!currentLocationMarker) {
                    currentLocationMarker = L.marker(e.latlng).addTo(map);
                } else {
                    if (!myCurrentRoutePath) {
                        myCurrentRoutePath = L.polyline([currentLocationMarker.getLatLng()], {color: 'blue'}).addTo(map);
                    } else {
                        myCurrentRoutePath.addLatLng(currentLocationMarker.getLatLng());
                    }

                    currentLocationMarker.setLatLng(e.latlng);
                }
            }

	function onLocationError(e) {
		alert(e.message);
	}

	map.on('locationfound', onLocationFound);
	map.on('locationerror', onLocationError);

	map.locate({
		setView: true, 
		maxZoom: 16,
		watch: true,
		enableHighAccuracy: false
	});


    	</script>
    </body>

</html>
