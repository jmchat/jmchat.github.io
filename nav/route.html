
<!DOCTYPE html>
<html lang="nl">
<head>
    <title>JM route</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css">
        .leafletMap {
            width: 450px;
            height: 450px;
        }
    </style>

</head>
<body>

<div class="leafletMap"></div>

<script src="https://lib.hmcms.nl/js/2/jquery.js"></script>
<script src="https://lib.hmcms.nl/js/2/libloader.js?load=hm.leaflet.map"></script>
<!-- hm.leaflet.custom -->
<script>
(function($, window, undefined) {
    // init widgets
    $(document).ready(function() {
        var $leafletMap = $('.leafletMap'),
            leaflet = new $.hm.leaflet.Map($leafletMap.get(0), {
                center: [51.8786502,5.8486047], // Joris thuis
                zoom: 16
            });

        // overlay custom image
        L.imageOverlay('jm.png',
            [[51.878925, 5.849849], [51.877481, 5.852303]]).addTo(leaflet.map);

        // rode lijn
        L.polyline([
            [51.87872050466521,5.850686674576875],[51.878690700201524,5.8517944269000255],[51.8779770429759,5.851496701699372]
        ], {color: 'red'}).addTo(leaflet.map);

        // current position:
        leaflet.map
            .locate({
                setView: true,
                maxZoom: 18,
                watch: true
            })

.on('locationfound', function(e){
                var radius = e.accuracy;

console.log('locationfound', e);

                if (!currentLocationMarker) {
                    currentLocationMarker = L.marker(e.latlng).addTo(leaflet.map);
                } else {
                    if (!myCurrentRoutePath) {
                        myCurrentRoutePath = L.polyline([currentLocationMarker.getLatLng()], {color: 'blue'}).addTo(leaflet.map);
                    } else {
                        myCurrentRoutePath.addLatLng(currentLocationMarker.getLatLng());
                    }

                    currentLocationMarker.setLatLng(e.latlng);
                }

    });
}
     });
    (jQuery, window));
</script>

</body>
</html>